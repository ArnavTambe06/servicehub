{"ast":null,"code":"var _jsxFileName = \"C:\\\\Project\\\\servicehub\\\\src\\\\pages\\\\Account.js\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { AuthContext } from '../contexts/AuthContext';\nimport { signOut, deleteUser } from 'firebase/auth';\nimport { auth, db } from '../firebaseInit';\nimport { doc, getDoc, deleteDoc } from 'firebase/firestore';\nimport { Redirect } from 'react-router';\nimport Loading from '../components/Loading';\nimport UserAccount from './UserAccount';\nimport ProviderAccount from './ProviderAccount';\nconst Account = () => {\n  const history = useHistory();\n  const {\n    currentUser,\n    setCurrentUser,\n    isProvider,\n    setIsProvider\n  } = useContext(AuthContext);\n  const [loading, setLoading] = useState(false);\n  const [userData, setUserData] = useState({\n    userDataFirstName: '',\n    userDataLastName: '',\n    userDataEmail: '',\n    userDataAddress: '',\n    userDataNumber: '',\n    userDataCart: []\n  });\n  const [providerData, setProviderData] = useState({\n    providerDataFirstName: '',\n    providerDataLastName: '',\n    providerDataCompanyName: '',\n    providerDataEmail: '',\n    providerDataNumber: '',\n    providerDataDescription: '',\n    providerDataServices: []\n  });\n\n  // Run Read function on app mount:\n  useEffect(() => {\n    fireStoreRead();\n    // eslint-disable-next-line\n  }, []);\n\n  // Read Firestore for account info:\n  const fireStoreRead = async () => {\n    setLoading(true);\n    // var getWhich = 'users'\n    // if (isProvider) {\n    //     getWhich = 'providers'\n    // }\n    var docSnap = await getDoc(doc(db, 'users', currentUser.uid));\n    if (docSnap.exists()) {\n      setUserData({\n        ...userData,\n        userDataFirstName: docSnap.data().userFirstName,\n        userDataLastName: docSnap.data().userLastName,\n        userDataEmail: docSnap.data().userEmail,\n        userDataAddress: docSnap.data().userAddress,\n        userDataNumber: docSnap.data().userNumber,\n        userDataCart: docSnap.data().userCart\n      });\n      setIsProvider(false);\n    } else {\n      docSnap = await getDoc(doc(db, 'providers', currentUser.uid));\n      if (docSnap.exists()) {\n        setProviderData({\n          ...providerData,\n          providerDataFirstName: docSnap.data().providerFirstName,\n          providerDataLastName: docSnap.data().providerLastName,\n          providerDataCompanyName: docSnap.data().providerCompanyName,\n          providerDataEmail: docSnap.data().providerEmail,\n          providerDataNumber: docSnap.data().providerNumber,\n          providerDataDescription: docSnap.data().providerDescription,\n          providerDataServices: docSnap.data().providerServices\n        });\n        setIsProvider(true);\n      } else {\n        console.log(`No such users/providers found.`);\n      }\n    }\n    setLoading(false);\n  };\n  const onSignOutSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    signOut(auth).then(() => {\n      setCurrentUser(null);\n      setIsProvider(false);\n    }).catch(error => {\n      console.log(error);\n    });\n    setLoading(false);\n  };\n  const onDeleteUser = async e => {\n    e.preventDefault();\n    setLoading(true);\n    var getWhich = 'users';\n    if (isProvider) {\n      getWhich = 'providers';\n    }\n    const user = auth.currentUser;\n    await deleteDoc(doc(db, getWhich, currentUser.uid));\n    deleteUser(user).then(() => {\n      alert('Successfully Deleted!');\n      history.push('/login');\n    }).catch(error => {\n      console.log(error);\n    });\n    setLoading(false);\n  };\n  if (currentUser !== null) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ninetyfiveperc-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }, loading ? /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 28\n      }\n    }) : /*#__PURE__*/React.createElement(React.Fragment, null, !isProvider ? /*#__PURE__*/React.createElement(UserAccount, {\n      userData: userData,\n      setUserData: setUserData,\n      onSignOutSubmit: onSignOutSubmit,\n      onDeleteUser: onDeleteUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 25\n      }\n    }) : /*#__PURE__*/React.createElement(ProviderAccount, {\n      providerData: providerData,\n      setProviderData: setProviderData,\n      onSignOutSubmit: onSignOutSubmit,\n      onDeleteUser: onDeleteUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 27\n      }\n    })));\n  } else {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 16\n      }\n    });\n  }\n};\nexport default Account;","map":{"version":3,"names":["React","useState","useContext","useEffect","useHistory","AuthContext","signOut","deleteUser","auth","db","doc","getDoc","deleteDoc","Redirect","Loading","UserAccount","ProviderAccount","Account","history","currentUser","setCurrentUser","isProvider","setIsProvider","loading","setLoading","userData","setUserData","userDataFirstName","userDataLastName","userDataEmail","userDataAddress","userDataNumber","userDataCart","providerData","setProviderData","providerDataFirstName","providerDataLastName","providerDataCompanyName","providerDataEmail","providerDataNumber","providerDataDescription","providerDataServices","fireStoreRead","docSnap","uid","exists","data","userFirstName","userLastName","userEmail","userAddress","userNumber","userCart","providerFirstName","providerLastName","providerCompanyName","providerEmail","providerNumber","providerDescription","providerServices","console","log","onSignOutSubmit","e","preventDefault","then","catch","error","onDeleteUser","getWhich","user","alert","push","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Fragment","to"],"sources":["C:/Project/servicehub/src/pages/Account.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { AuthContext } from '../contexts/AuthContext'\r\nimport { signOut, deleteUser } from 'firebase/auth'\r\nimport { auth, db } from '../firebaseInit'\r\nimport { doc, getDoc, deleteDoc } from 'firebase/firestore'\r\nimport { Redirect } from 'react-router'\r\nimport Loading from '../components/Loading'\r\nimport UserAccount from './UserAccount'\r\nimport ProviderAccount from './ProviderAccount'\r\n\r\nconst Account = () => {\r\n\r\n    const history = useHistory()\r\n    const { currentUser, setCurrentUser, isProvider, setIsProvider } = useContext(AuthContext)\r\n    const [loading, setLoading] = useState(false)\r\n    const [userData, setUserData] = useState({\r\n        userDataFirstName: '',\r\n        userDataLastName: '',\r\n        userDataEmail: '',\r\n        userDataAddress: '',\r\n        userDataNumber: '',\r\n        userDataCart: []\r\n    })\r\n\r\n    const [providerData, setProviderData] = useState({\r\n        providerDataFirstName: '',\r\n        providerDataLastName: '',\r\n        providerDataCompanyName: '',\r\n        providerDataEmail: '',\r\n        providerDataNumber: '',\r\n        providerDataDescription: '',\r\n        providerDataServices: []\r\n    })\r\n\r\n    // Run Read function on app mount:\r\n    useEffect(() => {\r\n        fireStoreRead()\r\n        // eslint-disable-next-line\r\n    }, [])\r\n\r\n    // Read Firestore for account info:\r\n    const fireStoreRead = async () => {\r\n        setLoading(true)\r\n        // var getWhich = 'users'\r\n        // if (isProvider) {\r\n        //     getWhich = 'providers'\r\n        // }\r\n        var docSnap = await getDoc(doc(db, 'users', currentUser.uid))\r\n        if (docSnap.exists()) {\r\n            setUserData({\r\n                ...userData,\r\n                userDataFirstName: docSnap.data().userFirstName,\r\n                userDataLastName: docSnap.data().userLastName,\r\n                userDataEmail: docSnap.data().userEmail,\r\n                userDataAddress: docSnap.data().userAddress,\r\n                userDataNumber: docSnap.data().userNumber,\r\n                userDataCart: docSnap.data().userCart\r\n            })\r\n            setIsProvider(false)\r\n        } else {\r\n            docSnap = await getDoc(doc(db, 'providers', currentUser.uid))\r\n            if (docSnap.exists()) {\r\n                setProviderData({\r\n                    ...providerData,\r\n                    providerDataFirstName: docSnap.data().providerFirstName,\r\n                    providerDataLastName: docSnap.data().providerLastName,\r\n                    providerDataCompanyName: docSnap.data().providerCompanyName,\r\n                    providerDataEmail: docSnap.data().providerEmail,\r\n                    providerDataNumber: docSnap.data().providerNumber,\r\n                    providerDataDescription: docSnap.data().providerDescription,\r\n                    providerDataServices: docSnap.data().providerServices\r\n                })\r\n                setIsProvider(true)\r\n            } else {\r\n                console.log(`No such users/providers found.`)\r\n            }\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const onSignOutSubmit = (e) => {\r\n        e.preventDefault()\r\n        setLoading(true)\r\n        signOut(auth).then(() => {\r\n            setCurrentUser(null)\r\n            setIsProvider(false)\r\n        }).catch((error) => {\r\n            console.log(error)\r\n        });\r\n        setLoading(false)\r\n    }\r\n\r\n    const onDeleteUser = async (e) => {\r\n        e.preventDefault()\r\n        setLoading(true)\r\n        var getWhich = 'users'\r\n        if (isProvider) {\r\n            getWhich = 'providers'\r\n        }\r\n        const user = auth.currentUser\r\n        await deleteDoc(doc(db, getWhich, currentUser.uid))\r\n        deleteUser(user).then(() => {\r\n            alert('Successfully Deleted!')\r\n            history.push('/login')\r\n        }).catch((error) => {\r\n            console.log(error)\r\n        })\r\n        setLoading(false)\r\n    }\r\n\r\n    if (currentUser !== null) {\r\n        return (\r\n            <div className='ninetyfiveperc-container'>\r\n                {loading ? <Loading /> : <>\r\n                    {!isProvider ?\r\n                        <UserAccount userData={userData} setUserData={setUserData} onSignOutSubmit={onSignOutSubmit} onDeleteUser={onDeleteUser} />\r\n                        : <ProviderAccount providerData={providerData} setProviderData={setProviderData} onSignOutSubmit={onSignOutSubmit} onDeleteUser={onDeleteUser} />\r\n                    }\r\n                </>}\r\n            </div>\r\n        )\r\n    } else {\r\n        return <Redirect to='/' />\r\n    }\r\n}\r\n\r\nexport default Account"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}