{"ast":null,"code":"var _jsxFileName = \"C:\\\\Project\\\\we-care\\\\src\\\\pages\\\\Services.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useEffect } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\nimport { doc, collection, query, getDoc, getDocs, updateDoc } from 'firebase/firestore';\nimport { db } from '../firebaseInit';\nimport Categories from '../components/Categories';\nimport ServiceCard from '../components/ServiceCard';\nimport Loading from '../components/Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Services = () => {\n  _s();\n  const {\n    currentUser,\n    isProvider\n  } = useContext(AuthContext);\n  const [loading, setLoading] = useState(false);\n  const [services, setServices] = useState({});\n  const [userData, setUserData] = useState({\n    name: '',\n    email: '',\n    cart: []\n  });\n  const serviceCategories = ['Cleaning', 'Electricians', 'Plumbers', 'Carpenters', 'Pest Control', 'Salon for Women', 'Salon for Men', 'Miscellaneous'];\n  useEffect(() => {\n    const fetchData = async () => {\n      await readServices();\n      await readUserData();\n    };\n    fetchData();\n  }, []);\n  const readServices = async () => {\n    setLoading(true);\n    const q = query(collection(db, 'providers'));\n    const docSnap = await getDocs(q);\n    let allServices = [];\n    docSnap.forEach(doc => {\n      allServices = [...allServices, ...doc.data().providerServices];\n    });\n    const categorizedServices = {};\n    serviceCategories.forEach(category => {\n      categorizedServices[category] = allServices.filter(service => service.serviceCategory === category);\n    });\n    setServices(categorizedServices);\n    setLoading(false);\n  };\n  const readUserData = async () => {\n    if (currentUser) {\n      const docSnap = await getDoc(doc(db, 'users', currentUser.uid));\n      if (docSnap.exists()) {\n        const data = docSnap.data();\n        setUserData({\n          name: data.name,\n          email: data.email,\n          cart: data.cart || []\n        });\n      }\n    }\n  };\n  const onAddToCart = async (category, index) => {\n    setLoading(true);\n    if (!currentUser) {\n      alert('Please login or sign up first.');\n      setLoading(false);\n      return;\n    }\n    const selectedService = services[category][index];\n    const updatedCart = [...userData.cart, selectedService];\n    setUserData(prev => ({\n      ...prev,\n      cart: updatedCart\n    }));\n    await updateDoc(doc(db, 'users', currentUser.uid), {\n      cart: updatedCart\n    }).catch(error => console.error('Error adding to cart:', error));\n    alert(`Added ${selectedService.serviceTitle} by ${selectedService.serviceProvider} to cart.`);\n    setLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"eightyperc-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-type1\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ninetyfiveperc-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"heading-type3\",\n          children: \"Services\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Choose from the best services at the lowest prices:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Categories, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), serviceCategories.map(category => {\n      var _services$category;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-type1\",\n        id: category,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ninetyfiveperc-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"services flex-column-stretch\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"para-type1\",\n              children: [category, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-column-stretch dark-grey-container\",\n              children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 44\n              }, this) : (_services$category = services[category]) !== null && _services$category !== void 0 && _services$category.length ? services[category].map((service, index) => /*#__PURE__*/_jsxDEV(ServiceCard, {\n                passedService: service,\n                passedIndex: index,\n                showButton: !isProvider,\n                onAddToCart: onAddToCart\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 41\n              }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"para-type2\",\n                children: [\"No \", category, \" Services\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this)\n      }, category, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n};\n_s(Services, \"4Medj2Ycdps9v2E+Ul2380+ikF0=\");\n_c = Services;\nexport default Services;\nvar _c;\n$RefreshReg$(_c, \"Services\");","map":{"version":3,"names":["React","useContext","useState","useEffect","AuthContext","doc","collection","query","getDoc","getDocs","updateDoc","db","Categories","ServiceCard","Loading","jsxDEV","_jsxDEV","Services","_s","currentUser","isProvider","loading","setLoading","services","setServices","userData","setUserData","name","email","cart","serviceCategories","fetchData","readServices","readUserData","q","docSnap","allServices","forEach","data","providerServices","categorizedServices","category","filter","service","serviceCategory","uid","exists","onAddToCart","index","alert","selectedService","updatedCart","prev","catch","error","console","serviceTitle","serviceProvider","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","_services$category","id","length","passedService","passedIndex","showButton","_c","$RefreshReg$"],"sources":["C:/Project/we-care/src/pages/Services.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\nimport { doc, collection, query, getDoc, getDocs, updateDoc } from 'firebase/firestore';\r\nimport { db } from '../firebaseInit';\r\nimport Categories from '../components/Categories';\r\nimport ServiceCard from '../components/ServiceCard';\r\nimport Loading from '../components/Loading';\r\n\r\nconst Services = () => {\r\n    const { currentUser, isProvider } = useContext(AuthContext);\r\n    const [loading, setLoading] = useState(false);\r\n    const [services, setServices] = useState({});\r\n    const [userData, setUserData] = useState({\r\n        name: '',\r\n        email: '',\r\n        cart: []\r\n    });\r\n\r\n    const serviceCategories = [\r\n        'Cleaning', 'Electricians', 'Plumbers', 'Carpenters', 'Pest Control',\r\n        'Salon for Women', 'Salon for Men', 'Miscellaneous'\r\n    ];\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            await readServices();\r\n            await readUserData();\r\n        };\r\n        fetchData();\r\n    }, []);\r\n\r\n    const readServices = async () => {\r\n        setLoading(true);\r\n        const q = query(collection(db, 'providers'));\r\n        const docSnap = await getDocs(q);\r\n        let allServices = [];\r\n\r\n        docSnap.forEach((doc) => {\r\n            allServices = [...allServices, ...doc.data().providerServices];\r\n        });\r\n\r\n        const categorizedServices = {};\r\n        serviceCategories.forEach(category => {\r\n            categorizedServices[category] = allServices.filter(service => service.serviceCategory === category);\r\n        });\r\n\r\n        setServices(categorizedServices);\r\n        setLoading(false);\r\n    };\r\n\r\n    const readUserData = async () => {\r\n        if (currentUser) {\r\n            const docSnap = await getDoc(doc(db, 'users', currentUser.uid));\r\n            if (docSnap.exists()) {\r\n                const data = docSnap.data();\r\n                setUserData({\r\n                    name: data.name,\r\n                    email: data.email,\r\n                    cart: data.cart || []\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const onAddToCart = async (category, index) => {\r\n        setLoading(true);\r\n        if (!currentUser) {\r\n            alert('Please login or sign up first.');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const selectedService = services[category][index];\r\n        const updatedCart = [...userData.cart, selectedService];\r\n\r\n        setUserData(prev => ({ ...prev, cart: updatedCart }));\r\n        await updateDoc(doc(db, 'users', currentUser.uid), { cart: updatedCart })\r\n            .catch(error => console.error('Error adding to cart:', error));\r\n\r\n        alert(`Added ${selectedService.serviceTitle} by ${selectedService.serviceProvider} to cart.`);\r\n        setLoading(false);\r\n    };\r\n\r\n    return (\r\n        <div className='eightyperc-container'>\r\n            <div className='card-type1'>\r\n                <div className='ninetyfiveperc-container'>\r\n                    <h2 className='heading-type3'>Services</h2>\r\n                    <p>Choose from the best services at the lowest prices:</p>\r\n                </div>\r\n            </div>\r\n            <Categories />\r\n\r\n            {serviceCategories.map(category => (\r\n                <div className='card-type1' id={category} key={category}>\r\n                    <div className='ninetyfiveperc-container'>\r\n                        <div className='services flex-column-stretch'>\r\n                            <h3 className='para-type1'>{category}:</h3>\r\n                            <div className='flex-column-stretch dark-grey-container'>\r\n                                {loading ? <Loading /> : (\r\n                                    services[category]?.length ? services[category].map((service, index) => (\r\n                                        <ServiceCard\r\n                                            key={index}\r\n                                            passedService={service}\r\n                                            passedIndex={index}\r\n                                            showButton={!isProvider}\r\n                                            onAddToCart={onAddToCart}\r\n                                        />\r\n                                    )) : <p className='para-type2'>No {category} Services</p>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Services;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}