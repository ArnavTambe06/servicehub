{"ast":null,"code":"var _jsxFileName = \"C:\\\\Project\\\\serviceHUB\\\\src\\\\pages\\\\Services.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useEffect, useCallback } from 'react';\nimport './Services.css';\nimport { AuthContext } from '../contexts/AuthContext';\nimport { doc, collection, query, getDoc, updateDoc, onSnapshot } from 'firebase/firestore';\nimport { db } from '../firebaseInit';\nimport Categories from '../components/Categories';\nimport ServiceCard from '../components/ServiceCard';\nimport Loading from '../components/Loading';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst serviceCategories = ['Cleaning', 'Electricians', 'Plumbers', 'Carpenters', 'Pest Control', 'Salon for Women', 'Salon for Men', 'Miscellaneous'];\nconst Services = () => {\n  _s();\n  const {\n    currentUser,\n    isProvider\n  } = useContext(AuthContext);\n  const [loading, setLoading] = useState(true);\n  const [services, setServices] = useState({});\n  const [userData, setUserData] = useState({\n    name: '',\n    email: '',\n    cart: []\n  });\n  const readUserData = useCallback(async () => {\n    if (currentUser) {\n      try {\n        const docSnap = await getDoc(doc(db, 'users', currentUser.uid));\n        if (docSnap.exists()) {\n          const data = docSnap.data();\n          setUserData({\n            name: data.name,\n            email: data.email,\n            cart: data.cart || []\n          });\n        }\n      } catch (error) {\n        console.error('Error fetching user data:', error);\n      }\n    }\n  }, [currentUser]);\n  useEffect(() => {\n    const fetchData = async () => {\n      await readUserData();\n    };\n    fetchData();\n    const q = query(collection(db, 'providers'));\n    const unsubscribe = onSnapshot(q, querySnapshot => {\n      let allServices = [];\n      querySnapshot.forEach(doc => {\n        const providerData = doc.data();\n        if (providerData.providerServices && Array.isArray(providerData.providerServices)) {\n          providerData.providerServices.forEach(service => {\n            allServices.push({\n              ...service,\n              providerName: providerData.name || \"Unknown Provider\"\n            });\n          });\n        }\n      });\n      const categorizedServices = {};\n      serviceCategories.forEach(category => {\n        categorizedServices[category] = allServices.filter(service => service.serviceCategory === category);\n      });\n      setServices(categorizedServices);\n      setLoading(false);\n    }, error => {\n      console.error(\"Error fetching services:\", error);\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, [readUserData]);\n  const onAddToCart = async (category, index) => {\n    setLoading(true);\n    if (!currentUser) {\n      alert('Please login or sign up first.');\n      setLoading(false);\n      return;\n    }\n    const selectedService = services[category][index];\n    const updatedCart = [...userData.cart, selectedService];\n    try {\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        cart: updatedCart\n      });\n      setUserData(prev => ({\n        ...prev,\n        cart: updatedCart\n      }));\n      alert(`Added ${selectedService.serviceTitle} by ${selectedService.providerName} to cart.`);\n    } catch (error) {\n      console.error('Error adding to cart:', error);\n      alert('Failed to add to cart. Please try again.');\n    }\n    setLoading(false);\n  };\n  const renderServicesByCategory = () => {\n    return Object.entries(services).map(([category, categoryServices]) => {\n      // Skip empty categories\n      if (!categoryServices || categoryServices.length === 0) return null;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"category-title\",\n          children: category.replace(/-/g, ' ').toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"services-grid\",\n          children: categoryServices.map((service, index) => /*#__PURE__*/_jsxDEV(ServiceCard, {\n            passedService: service,\n            passedIndex: index,\n            showButton: !isProvider,\n            onAddToCart: onAddToCart\n          }, `${category}-${index}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)]\n      }, category, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this);\n    }).filter(Boolean); // Remove null entries\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"services\",\n    children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Categories, {\n        categories: serviceCategories\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"services-content\",\n        children: renderServicesByCategory()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 9\n  }, this);\n};\n_s(Services, \"3KFg8VEdjSuZ2MyYZ7ZgiXkOrX0=\");\n_c = Services;\nexport default Services;\nvar _c;\n$RefreshReg$(_c, \"Services\");","map":{"version":3,"names":["React","useContext","useState","useEffect","useCallback","AuthContext","doc","collection","query","getDoc","updateDoc","onSnapshot","db","Categories","ServiceCard","Loading","jsxDEV","_jsxDEV","Fragment","_Fragment","serviceCategories","Services","_s","currentUser","isProvider","loading","setLoading","services","setServices","userData","setUserData","name","email","cart","readUserData","docSnap","uid","exists","data","error","console","fetchData","q","unsubscribe","querySnapshot","allServices","forEach","providerData","providerServices","Array","isArray","service","push","providerName","categorizedServices","category","filter","serviceCategory","onAddToCart","index","alert","selectedService","updatedCart","prev","serviceTitle","renderServicesByCategory","Object","entries","map","categoryServices","length","className","children","replace","toUpperCase","fileName","_jsxFileName","lineNumber","columnNumber","passedService","passedIndex","showButton","Boolean","categories","_c","$RefreshReg$"],"sources":["C:/Project/serviceHUB/src/pages/Services.js"],"sourcesContent":["import React, { useContext, useState, useEffect, useCallback } from 'react';\r\nimport './Services.css';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\nimport { doc, collection, query, getDoc, updateDoc, onSnapshot } from 'firebase/firestore';\r\nimport { db } from '../firebaseInit';\r\nimport Categories from '../components/Categories';\r\nimport ServiceCard from '../components/ServiceCard';\r\nimport Loading from '../components/Loading';\r\n\r\nconst serviceCategories = [\r\n    'Cleaning', 'Electricians', 'Plumbers', 'Carpenters', 'Pest Control',\r\n    'Salon for Women', 'Salon for Men', 'Miscellaneous'\r\n];\r\n\r\nconst Services = () => {\r\n    const { currentUser, isProvider } = useContext(AuthContext);\r\n    const [loading, setLoading] = useState(true);\r\n    const [services, setServices] = useState({});\r\n    const [userData, setUserData] = useState({\r\n        name: '',\r\n        email: '',\r\n        cart: []\r\n    });\r\n\r\n\r\n\r\n    const readUserData = useCallback(async () => {\r\n        if (currentUser) {\r\n            try {\r\n                const docSnap = await getDoc(doc(db, 'users', currentUser.uid));\r\n                if (docSnap.exists()) {\r\n                    const data = docSnap.data();\r\n                    setUserData({\r\n                        name: data.name,\r\n                        email: data.email,\r\n                        cart: data.cart || []\r\n                    });\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching user data:', error);\r\n            }\r\n        }\r\n    }, [currentUser]);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            await readUserData();\r\n        };\r\n        fetchData();\r\n\r\n        const q = query(collection(db, 'providers'));\r\n        const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n            let allServices = [];\r\n\r\n            querySnapshot.forEach((doc) => {\r\n                const providerData = doc.data();\r\n\r\n                if (providerData.providerServices && Array.isArray(providerData.providerServices)) {\r\n                    providerData.providerServices.forEach(service => {\r\n                        allServices.push({\r\n                            ...service,\r\n                            providerName: providerData.name || \"Unknown Provider\"\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n\r\n            const categorizedServices = {};\r\n            serviceCategories.forEach(category => {\r\n                categorizedServices[category] = allServices.filter(service => service.serviceCategory === category);\r\n            });\r\n\r\n            setServices(categorizedServices);\r\n            setLoading(false);\r\n        }, (error) => {\r\n            console.error(\"Error fetching services:\", error);\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, [readUserData]);\r\n\r\n    const onAddToCart = async (category, index) => {\r\n        setLoading(true);\r\n        if (!currentUser) {\r\n            alert('Please login or sign up first.');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const selectedService = services[category][index];\r\n        const updatedCart = [...userData.cart, selectedService];\r\n\r\n        try {\r\n            await updateDoc(doc(db, 'users', currentUser.uid), { cart: updatedCart });\r\n            setUserData(prev => ({ ...prev, cart: updatedCart }));\r\n            alert(`Added ${selectedService.serviceTitle} by ${selectedService.providerName} to cart.`);\r\n        } catch (error) {\r\n            console.error('Error adding to cart:', error);\r\n            alert('Failed to add to cart. Please try again.');\r\n        }\r\n\r\n        setLoading(false);\r\n    };\r\n\r\n    const renderServicesByCategory = () => {\r\n        return Object.entries(services).map(([category, categoryServices]) => {\r\n            // Skip empty categories\r\n            if (!categoryServices || categoryServices.length === 0) return null;\r\n\r\n            return (\r\n                <div key={category} className=\"category-section\">\r\n                    <h3 className=\"category-title\">\r\n                        {category.replace(/-/g, ' ').toUpperCase()}\r\n                    </h3>\r\n                    <div className=\"services-grid\">\r\n                        {categoryServices.map((service, index) => (\r\n                            <ServiceCard\r\n                                key={`${category}-${index}`}\r\n                                passedService={service}\r\n                                passedIndex={index}\r\n                                showButton={!isProvider}\r\n                                onAddToCart={onAddToCart}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            );\r\n        }).filter(Boolean); // Remove null entries\r\n    };\r\n\r\n    return (\r\n        <div className=\"services\">\r\n            {loading ? (\r\n                <Loading />\r\n            ) : (\r\n                <>\r\n                    <Categories categories={serviceCategories} />\r\n                    <div className=\"services-content\">\r\n                        {renderServicesByCategory()}\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Services;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}