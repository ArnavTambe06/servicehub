{"ast":null,"code":"var _jsxFileName = \"C:\\\\Project\\\\we-care\\\\src\\\\pages\\\\Account.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { AuthContext } from '../contexts/AuthContext';\nimport { signOut, deleteUser } from 'firebase/auth';\nimport { auth, db } from '../firebaseInit';\nimport { doc, getDoc, deleteDoc } from 'firebase/firestore';\nimport { Redirect } from 'react-router';\nimport Loading from '../components/Loading';\nimport UserAccount from './UserAccount';\nimport ProviderAccount from './ProviderAccount';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Account = () => {\n  _s();\n  const history = useHistory();\n  const {\n    currentUser,\n    setCurrentUser,\n    isProvider,\n    setIsProvider\n  } = useContext(AuthContext);\n  const [loading, setLoading] = useState(false);\n  const [userData, setUserData] = useState({\n    name: '',\n    email: '',\n    address: '',\n    phone: ''\n    //userDataCart: []\n  });\n  const [providerData, setProviderData] = useState({\n    providerDataFirstName: '',\n    providerDataLastName: '',\n    providerDataCompanyName: '',\n    providerDataEmail: '',\n    providerDataNumber: '',\n    providerDataDescription: '',\n    providerDataServices: []\n  });\n\n  // Run Read function on app mount:\n  useEffect(() => {\n    fireStoreRead();\n    // eslint-disable-next-line\n  }, []);\n\n  // Read Firestore for account info:\n  const fireStoreRead = async () => {\n    setLoading(true);\n    // var getWhich = 'users'\n    // if (isProvider) {\n    //     getWhich = 'providers'\n    // }\n    var docSnap = await getDoc(doc(db, 'users', currentUser.uid));\n    if (docSnap.exists()) {\n      setUserData({\n        ...userData,\n        name: docSnap.data().userFirstName,\n        email: docSnap.data().userEmail,\n        address: docSnap.data().userAddress,\n        phone: docSnap.data().userNumber\n        //userDataCart: docSnap.data().userCart\n      });\n      setIsProvider(false);\n    } else {\n      docSnap = await getDoc(doc(db, 'providers', currentUser.uid));\n      if (docSnap.exists()) {\n        setProviderData({\n          ...providerData,\n          providerDataFirstName: docSnap.data().providerFirstName,\n          providerDataLastName: docSnap.data().providerLastName,\n          providerDataCompanyName: docSnap.data().providerCompanyName,\n          providerDataEmail: docSnap.data().providerEmail,\n          providerDataNumber: docSnap.data().providerNumber,\n          providerDataDescription: docSnap.data().providerDescription,\n          providerDataServices: docSnap.data().providerServices\n        });\n        setIsProvider(true);\n      } else {\n        console.log(`No such users/providers found.`);\n      }\n    }\n    setLoading(false);\n  };\n  const onSignOutSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    signOut(auth).then(() => {\n      setCurrentUser(null);\n      setIsProvider(false);\n    }).catch(error => {\n      console.log(error);\n    });\n    setLoading(false);\n  };\n  const onDeleteUser = async e => {\n    e.preventDefault();\n    setLoading(true);\n    var getWhich = 'users';\n    if (isProvider) {\n      getWhich = 'providers';\n    }\n    const user = auth.currentUser;\n    await deleteDoc(doc(db, getWhich, currentUser.uid));\n    deleteUser(user).then(() => {\n      alert('Successfully Deleted!');\n      history.push('/login');\n    }).catch(error => {\n      console.log(error);\n    });\n    setLoading(false);\n  };\n  if (currentUser !== null) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ninetyfiveperc-container\",\n      children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 28\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: !isProvider ? /*#__PURE__*/_jsxDEV(UserAccount, {\n          userData: userData,\n          setUserData: setUserData,\n          onSignOutSubmit: onSignOutSubmit,\n          onDeleteUser: onDeleteUser\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(ProviderAccount, {\n          providerData: providerData,\n          setProviderData: setProviderData,\n          onSignOutSubmit: onSignOutSubmit,\n          onDeleteUser: onDeleteUser\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 27\n        }, this)\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 16\n    }, this);\n  }\n};\n_s(Account, \"M5OzWfL1KLjQOaN3STC+yUyo/ac=\", false, function () {\n  return [useHistory];\n});\n_c = Account;\nexport default Account;\nvar _c;\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"names":["React","useState","useContext","useEffect","useHistory","AuthContext","signOut","deleteUser","auth","db","doc","getDoc","deleteDoc","Redirect","Loading","UserAccount","ProviderAccount","jsxDEV","_jsxDEV","Fragment","_Fragment","Account","_s","history","currentUser","setCurrentUser","isProvider","setIsProvider","loading","setLoading","userData","setUserData","name","email","address","phone","providerData","setProviderData","providerDataFirstName","providerDataLastName","providerDataCompanyName","providerDataEmail","providerDataNumber","providerDataDescription","providerDataServices","fireStoreRead","docSnap","uid","exists","data","userFirstName","userEmail","userAddress","userNumber","providerFirstName","providerLastName","providerCompanyName","providerEmail","providerNumber","providerDescription","providerServices","console","log","onSignOutSubmit","e","preventDefault","then","catch","error","onDeleteUser","getWhich","user","alert","push","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","_c","$RefreshReg$"],"sources":["C:/Project/we-care/src/pages/Account.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { AuthContext } from '../contexts/AuthContext'\r\nimport { signOut, deleteUser } from 'firebase/auth'\r\nimport { auth, db } from '../firebaseInit'\r\nimport { doc, getDoc, deleteDoc } from 'firebase/firestore'\r\nimport { Redirect } from 'react-router'\r\nimport Loading from '../components/Loading'\r\nimport UserAccount from './UserAccount'\r\nimport ProviderAccount from './ProviderAccount'\r\n\r\nconst Account = () => {\r\n\r\n    const history = useHistory()\r\n    const { currentUser, setCurrentUser, isProvider, setIsProvider } = useContext(AuthContext)\r\n    const [loading, setLoading] = useState(false)\r\n    const [userData, setUserData] = useState({\r\n        name: '',\r\n        email: '',\r\n        address: '',\r\n        phone: '',\r\n        //userDataCart: []\r\n    })\r\n\r\n    const [providerData, setProviderData] = useState({\r\n        providerDataFirstName: '',\r\n        providerDataLastName: '',\r\n        providerDataCompanyName: '',\r\n        providerDataEmail: '',\r\n        providerDataNumber: '',\r\n        providerDataDescription: '',\r\n        providerDataServices: []\r\n    })\r\n\r\n    // Run Read function on app mount:\r\n    useEffect(() => {\r\n        fireStoreRead()\r\n        // eslint-disable-next-line\r\n    }, [])\r\n\r\n    // Read Firestore for account info:\r\n    const fireStoreRead = async () => {\r\n        setLoading(true)\r\n        // var getWhich = 'users'\r\n        // if (isProvider) {\r\n        //     getWhich = 'providers'\r\n        // }\r\n        var docSnap = await getDoc(doc(db, 'users', currentUser.uid))\r\n        if (docSnap.exists()) {\r\n            setUserData({\r\n                ...userData,\r\n                name: docSnap.data().userFirstName,\r\n                email: docSnap.data().userEmail,\r\n                address: docSnap.data().userAddress,\r\n                phone: docSnap.data().userNumber,\r\n                //userDataCart: docSnap.data().userCart\r\n            })\r\n            setIsProvider(false)\r\n        } else {\r\n            docSnap = await getDoc(doc(db, 'providers', currentUser.uid))\r\n            if (docSnap.exists()) {\r\n                setProviderData({\r\n                    ...providerData,\r\n                    providerDataFirstName: docSnap.data().providerFirstName,\r\n                    providerDataLastName: docSnap.data().providerLastName,\r\n                    providerDataCompanyName: docSnap.data().providerCompanyName,\r\n                    providerDataEmail: docSnap.data().providerEmail,\r\n                    providerDataNumber: docSnap.data().providerNumber,\r\n                    providerDataDescription: docSnap.data().providerDescription,\r\n                    providerDataServices: docSnap.data().providerServices\r\n                })\r\n                setIsProvider(true)\r\n            } else {\r\n                console.log(`No such users/providers found.`)\r\n            }\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const onSignOutSubmit = (e) => {\r\n        e.preventDefault()\r\n        setLoading(true)\r\n        signOut(auth).then(() => {\r\n            setCurrentUser(null)\r\n            setIsProvider(false)\r\n        }).catch((error) => {\r\n            console.log(error)\r\n        });\r\n        setLoading(false)\r\n    }\r\n\r\n    const onDeleteUser = async (e) => {\r\n        e.preventDefault()\r\n        setLoading(true)\r\n        var getWhich = 'users'\r\n        if (isProvider) {\r\n            getWhich = 'providers'\r\n        }\r\n        const user = auth.currentUser\r\n        await deleteDoc(doc(db, getWhich, currentUser.uid))\r\n        deleteUser(user).then(() => {\r\n            alert('Successfully Deleted!')\r\n            history.push('/login')\r\n        }).catch((error) => {\r\n            console.log(error)\r\n        })\r\n        setLoading(false)\r\n    }\r\n\r\n    if (currentUser !== null) {\r\n        return (\r\n            <div className='ninetyfiveperc-container'>\r\n                {loading ? <Loading /> : <>\r\n                    {!isProvider ?\r\n                        <UserAccount userData={userData} setUserData={setUserData} onSignOutSubmit={onSignOutSubmit} onDeleteUser={onDeleteUser} />\r\n                        : <ProviderAccount providerData={providerData} setProviderData={setProviderData} onSignOutSubmit={onSignOutSubmit} onDeleteUser={onDeleteUser} />\r\n                    }\r\n                </>}\r\n            </div>\r\n        )\r\n    } else {\r\n        return <Redirect to='/' />\r\n    }\r\n}\r\n\r\nexport default Account"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}