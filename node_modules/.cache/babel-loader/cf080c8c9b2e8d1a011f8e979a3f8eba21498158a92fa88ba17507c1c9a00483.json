{"ast":null,"code":"var _jsxFileName = \"C:\\\\Project\\\\we-care\\\\src\\\\pages\\\\Services.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useEffect } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\nimport { doc, collection, query, getDoc, updateDoc, onSnapshot } from 'firebase/firestore';\nimport { db } from '../firebaseInit';\nimport Categories from '../components/Categories';\nimport ServiceCard from '../components/ServiceCard';\nimport Loading from '../components/Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Services = () => {\n  _s();\n  const {\n    currentUser,\n    isProvider\n  } = useContext(AuthContext);\n  const [loading, setLoading] = useState(false);\n  const [services, setServices] = useState({});\n  const [userData, setUserData] = useState({\n    name: '',\n    email: '',\n    cart: []\n  });\n  const serviceCategories = ['Cleaning', 'Electricians', 'Plumbers', 'Carpenters', 'Pest Control', 'Salon for Women', 'Salon for Men', 'Miscellaneous'];\n  useEffect(() => {\n    const fetchData = async () => {\n      await readUserData();\n    };\n    fetchData();\n    const q = query(collection(db, 'providers'));\n    const unsubscribe = onSnapshot(q, querySnapshot => {\n      let allServices = [];\n      querySnapshot.forEach(doc => {\n        const providerData = doc.data();\n        if (providerData.providerServices) {\n          allServices = [...allServices, ...providerData.providerServices];\n        }\n      });\n      const categorizedServices = {};\n      serviceCategories.forEach(category => {\n        categorizedServices[category] = allServices.filter(service => service.serviceCategory === category);\n      });\n      setServices(categorizedServices);\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, []);\n  const readUserData = async () => {\n    if (currentUser) {\n      const docSnap = await getDoc(doc(db, 'users', currentUser.uid));\n      if (docSnap.exists()) {\n        const data = docSnap.data();\n        setUserData({\n          name: data.name,\n          email: data.email,\n          cart: data.cart || []\n        });\n      }\n    }\n  };\n  const onAddToCart = async (category, index) => {\n    setLoading(true);\n    if (!currentUser) {\n      alert('Please login or sign up first.');\n      setLoading(false);\n      return;\n    }\n    const selectedService = services[category][index];\n    const updatedCart = [...userData.cart, selectedService];\n    setUserData(prev => ({\n      ...prev,\n      cart: updatedCart\n    }));\n    await updateDoc(doc(db, 'users', currentUser.uid), {\n      cart: updatedCart\n    }).catch(error => console.error('Error adding to cart:', error));\n    alert(`Added ${selectedService.serviceTitle} by ${selectedService.serviceProvider} to cart.`);\n    setLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"eightyperc-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-type1\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ninetyfiveperc-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"heading-type3\",\n          children: \"Services\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Choose from the best services at the lowest prices:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Categories, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), serviceCategories.map(category => {\n      var _services$category;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-type1\",\n        id: category,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ninetyfiveperc-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"services flex-column-stretch\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"para-type1\",\n              children: [category, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-column-stretch dark-grey-container\",\n              children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 44\n              }, this) : (_services$category = services[category]) !== null && _services$category !== void 0 && _services$category.length ? services[category].map((service, index) => /*#__PURE__*/_jsxDEV(ServiceCard, {\n                passedService: service,\n                passedIndex: index,\n                showButton: !isProvider,\n                onAddToCart: onAddToCart\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 41\n              }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"para-type2\",\n                children: [\"No \", category, \" Services\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)\n      }, category, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n};\n_s(Services, \"4Medj2Ycdps9v2E+Ul2380+ikF0=\");\n_c = Services;\nexport default Services;\nvar _c;\n$RefreshReg$(_c, \"Services\");","map":{"version":3,"names":["React","useContext","useState","useEffect","AuthContext","doc","collection","query","getDoc","updateDoc","onSnapshot","db","Categories","ServiceCard","Loading","jsxDEV","_jsxDEV","Services","_s","currentUser","isProvider","loading","setLoading","services","setServices","userData","setUserData","name","email","cart","serviceCategories","fetchData","readUserData","q","unsubscribe","querySnapshot","allServices","forEach","providerData","data","providerServices","categorizedServices","category","filter","service","serviceCategory","docSnap","uid","exists","onAddToCart","index","alert","selectedService","updatedCart","prev","catch","error","console","serviceTitle","serviceProvider","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","_services$category","id","length","passedService","passedIndex","showButton","_c","$RefreshReg$"],"sources":["C:/Project/we-care/src/pages/Services.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\nimport { doc, collection, query, getDoc, updateDoc, onSnapshot } from 'firebase/firestore';\r\nimport { db } from '../firebaseInit';\r\nimport Categories from '../components/Categories';\r\nimport ServiceCard from '../components/ServiceCard';\r\nimport Loading from '../components/Loading';\r\n\r\nconst Services = () => {\r\n    const { currentUser, isProvider } = useContext(AuthContext);\r\n    const [loading, setLoading] = useState(false);\r\n    const [services, setServices] = useState({});\r\n    const [userData, setUserData] = useState({\r\n        name: '',\r\n        email: '',\r\n        cart: []\r\n    });\r\n\r\n    const serviceCategories = [\r\n        'Cleaning', 'Electricians', 'Plumbers', 'Carpenters', 'Pest Control',\r\n        'Salon for Women', 'Salon for Men', 'Miscellaneous'\r\n    ];\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            await readUserData();\r\n        };\r\n        fetchData();\r\n\r\n        const q = query(collection(db, 'providers'));\r\n        const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n            let allServices = [];\r\n            querySnapshot.forEach((doc) => {\r\n                const providerData = doc.data();\r\n                if (providerData.providerServices) {\r\n                    allServices = [...allServices, ...providerData.providerServices];\r\n                }\r\n            });\r\n\r\n            const categorizedServices = {};\r\n            serviceCategories.forEach(category => {\r\n                categorizedServices[category] = allServices.filter(service => service.serviceCategory === category);\r\n            });\r\n\r\n            setServices(categorizedServices);\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    const readUserData = async () => {\r\n        if (currentUser) {\r\n            const docSnap = await getDoc(doc(db, 'users', currentUser.uid));\r\n            if (docSnap.exists()) {\r\n                const data = docSnap.data();\r\n                setUserData({\r\n                    name: data.name,\r\n                    email: data.email,\r\n                    cart: data.cart || []\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const onAddToCart = async (category, index) => {\r\n        setLoading(true);\r\n        if (!currentUser) {\r\n            alert('Please login or sign up first.');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const selectedService = services[category][index];\r\n        const updatedCart = [...userData.cart, selectedService];\r\n\r\n        setUserData(prev => ({ ...prev, cart: updatedCart }));\r\n        await updateDoc(doc(db, 'users', currentUser.uid), { cart: updatedCart })\r\n            .catch(error => console.error('Error adding to cart:', error));\r\n\r\n        alert(`Added ${selectedService.serviceTitle} by ${selectedService.serviceProvider} to cart.`);\r\n        setLoading(false);\r\n    };\r\n\r\n    return (\r\n        <div className='eightyperc-container'>\r\n            <div className='card-type1'>\r\n                <div className='ninetyfiveperc-container'>\r\n                    <h2 className='heading-type3'>Services</h2>\r\n                    <p>Choose from the best services at the lowest prices:</p>\r\n                </div>\r\n            </div>\r\n            <Categories />\r\n\r\n            {serviceCategories.map(category => (\r\n                <div className='card-type1' id={category} key={category}>\r\n                    <div className='ninetyfiveperc-container'>\r\n                        <div className='services flex-column-stretch'>\r\n                            <h3 className='para-type1'>{category}:</h3>\r\n                            <div className='flex-column-stretch dark-grey-container'>\r\n                                {loading ? <Loading /> : (\r\n                                    services[category]?.length ? services[category].map((service, index) => (\r\n                                        <ServiceCard\r\n                                            key={index}\r\n                                            passedService={service}\r\n                                            passedIndex={index}\r\n                                            showButton={!isProvider}\r\n                                            onAddToCart={onAddToCart}\r\n                                        />\r\n                                    )) : <p className='para-type2'>No {category} Services</p>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Services;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}